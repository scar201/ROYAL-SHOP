<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>الاختبار الإلكتروني</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #202c2c 0%, #1a2424 50%, #0f1616 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .header {
            background: #202c2c;
            padding: 30px;
            text-align: center;
            border-bottom: 3px solid #1a2424;
        }

        .header h1 {
            color: white;
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        .header p {
            color: #cccccc;
            font-size: 1.1em;
        }

        .form-container {
            padding: 40px;
        }

        .question-group {
            margin-bottom: 30px;
            padding: 25px;
            background: #f8f9fa;
            border-radius: 10px;
            border-right: 5px solid #202c2c;
            transition: all 0.3s ease;
        }

        .question-group:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .question-title {
            font-size: 1.3em;
            color: #333;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .required {
            color: #e74c3c;
        }

        input[type="text"], input[type="email"], textarea, select {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e1e8ed;
            border-radius: 8px;
            font-size: 1em;
            transition: all 0.3s ease;
            background: white;
        }

        input[type="text"]:focus, input[type="email"]:focus, textarea:focus, select:focus {
            outline: none;
            border-color: #202c2c;
            box-shadow: 0 0 0 3px rgba(32, 44, 44, 0.2);
        }

        textarea {
            resize: vertical;
            min-height: 100px;
        }

        .radio-group, .checkbox-group {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .radio-option, .checkbox-option {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px;
            border-radius: 8px;
            transition: background 0.3s ease;
            cursor: pointer;
        }

        .radio-option:hover, .checkbox-option:hover {
            background: #e8f7ff;
        }

        input[type="radio"], input[type="checkbox"] {
            width: 20px;
            height: 20px;
            accent-color: #202c2c;
        }

        .submit-btn {
            background: linear-gradient(45deg, #202c2c, #1a2424);
            color: white;
            padding: 15px 40px;
            border: none;
            border-radius: 25px;
            font-size: 1.2em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: block;
            margin: 40px auto 0;
            min-width: 200px;
        }

        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(32, 44, 44, 0.4);
        }

        .submit-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .status-message {
            text-align: center;
            padding: 20px;
            margin: 20px 0;
            border-radius: 10px;
            font-size: 1.1em;
            font-weight: 600;
            display: none;
        }

        .status-success {
            background: #d4edda;
            color: #155724;
            border: 2px solid #c3e6cb;
        }

        .status-error {
            background: #f8d7da;
            color: #721c24;
            border: 2px solid #f5c6cb;
        }

        .status-pending {
            background: #fff3cd;
            color: #856404;
            border: 2px solid #ffeaa7;
        }

        .status-approved {
            background: #d1ecf1;
            color: #0c5460;
            border: 2px solid #bee5eb;
        }

        .status-rejected {
            background: #f8d7da;
            color: #721c24;
            border: 2px solid #f5c6cb;
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #202c2c;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-left: 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @media (max-width: 768px) {
            .container {
                margin: 10px;
                border-radius: 10px;
            }
            
            .header {
                padding: 20px;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .form-container {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>الاختبار الإلكتروني</h1>
            <p>يرجى ملء جميع المعلومات المطلوبة بعناية</p>
        </div>

        <div class="form-container">
            <form id="examForm">
                <!-- معلومات شخصية -->
                <div class="question-group">
                    <div class="question-title">الاسم الكامل <span class="required">*</span></div>
                    <input type="text" name="fullName" required placeholder="أدخل اسمك الكامل">
                </div>

                <div class="question-group">
                    <div class="question-title">يوزر الديسكورد <span class="required">*</span></div>
                    <input type="text" name="discordUsername" required placeholder="مثال: username#1234">
                </div>
                
                <div class="question-group">
                    <div class="question-title">يوزرك روبلوكس <span class="required">*</span></div>
                    <input type="text" name="discordUsername" required placeholder="مثال: SalehDev1">
                </div>
                
                <!-- الأسئلة -->
                <div class="question-group">
                    <div class="question-title">1. ما هو الميتا جيمنق؟ <span class="required">*</span></div>
                    <div class="radio-group">
                        <label class="radio-option">
                            <input type="radio" name="q1" value="اي معلومة تحصل عليها من خارج المدينة مثال معلومة حصلت عليها من بث او دسكورد او مقطع باليوتيوب" required>
                            <span>اي معلومة تحصل عليها من خارج المدينة مثال معلومة حصلت عليها من بث او دسكورد او مقطع باليوتيوب</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="q1" value="ميتا جيمنق قدامي سياره واكمل وارفع عليه السلاح واخليه ينزل واركبها" required>
                            <span>ميتا جيمنق قدامي سياره واكمل وارفع عليه السلاح واخليه ينزل واركبها</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="q1" value="اروح مركز الشرطه بشكل طبيعي واتقمص الرول بلاي واحاول اني اسوي نفسي طبيعي" required>
                            <span>اروح مركز الشرطه بشكل طبيعي واتقمص الرول بلاي واحاول اني اسوي نفسي طبيعي</span>
                        </label>
                    </div>
                </div>

                <div class="question-group">
                    <div class="question-title">2. هل ممنوع تقتل البوتات؟ <span class="required">*</span></div>
                    <div class="radio-group">
                        <label class="radio-option">
                            <input type="radio" name="q2" value="ايه نعم ممنوع" required>
                            <span>ايه نعم ممنوع</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="q2" value="لاغير صحيح مب ممنوع" required>
                            <span>لاغير صحيح مب ممنوع</span>
                        </label>
                    </div>
                </div>

                <div class="question-group">
                    <div class="question-title">3. هل مسموح تقتل بمنطقة آمنة؟ <span class="required">*</span></div>
                    <div class="radio-group">
                        <label class="radio-option">
                            <input type="radio" name="q3" value="صحيح" required>
                            <span>صحيح</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="q3" value="خطأ" required>
                            <span>خطأ</span>
                        </label>
                    </div>
                </div>

                <div class="question-group">
                    <div class="question-title">4. هل مسموح تخطف مواطن عند المحكمة؟ <span class="required">*</span></div>
                    <div class="radio-group">
                        <label class="radio-option">
                            <input type="radio" name="q4" value="صحيح" required>
                            <span>صحيح</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="q4" value="خطأ" required>
                            <span>خطأ</span>
                        </label>
                    </div>
                </div>

                <div class="question-group">
                    <div class="question-title">5. اذا مت بشكل كامل هل يحق ترجع او تتذكر الي صار؟ <span class="required">*</span></div>
                    <div class="radio-group">
                        <label class="radio-option">
                            <input type="radio" name="q5" value="ايه" required>
                            <span>ايه</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="q5" value="لآ" required>
                            <span>لآ</span>
                        </label>
                    </div>
                </div>

                <div class="question-group">
                    <div class="question-title">6. هل مسموح تكذب بالرول؟ <span class="required">*</span></div>
                    <div class="radio-group">
                        <label class="radio-option">
                            <input type="radio" name="q6" value="صحيح" required>
                            <span>صحيح</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="q6" value="لا" required>
                            <span>لا</span>
                        </label>
                    </div>
                </div>

                <div class="question-group">
                    <div class="question-title">7. يحق لك تستعمل RDM مهما كان السبب؟ <span class="required">*</span></div>
                    <div class="radio-group">
                        <label class="radio-option">
                            <input type="radio" name="q7" value="صحيح" required>
                            <span>صحيح</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="q7" value="لا" required>
                            <span>لا</span>
                        </label>
                    </div>
                </div>

                <div class="question-group">
                    <div class="question-title">8. هل يحق لك اخذ سلاح مع عسكري وتقتل فيه اي شي يمشي؟ <span class="required">*</span></div>
                    <div class="radio-group">
                        <label class="radio-option">
                            <input type="radio" name="q8" value="لا" required>
                            <span>لا</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="q8" value="صحيح" required>
                            <span>صحيح</span>
                        </label>
                    </div>
                </div>

                <div class="question-group">
                    <div class="question-title">9. ما معنى كلمة دسكورد؟ <span class="required">*</span></div>
                    <div class="radio-group">
                        <label class="radio-option">
                            <input type="radio" name="q9" value="برنامج الدولة" required>
                            <span>برنامج الدولة</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="q9" value="دسكورد" required>
                            <span>دسكورد</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="q9" value="سوالف" required>
                            <span>سوالف</span>
                        </label>
                    </div>
                </div>

                <div class="question-group">
                    <div class="question-title">10. هل مسموح لك تحمل شخص بدون يرفع يده؟ <span class="required">*</span></div>
                    <div class="radio-group">
                        <label class="radio-option">
                            <input type="radio" name="q10" value="صحيح" required>
                            <span>صحيح</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="q10" value="لآ" required>
                            <span>لآ</span>
                        </label>
                    </div>
                </div>

                <div class="question-group">
                    <div class="question-title">11. هل يحق لك تدخل على الناس وتصدم فيهم؟ <span class="required">*</span></div>
                    <div class="radio-group">
                        <label class="radio-option">
                            <input type="radio" name="q11" value="صحيح" required>
                            <span>صحيح</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="q11" value="لآ" required>
                            <span>لآ</span>
                        </label>
                    </div>
                </div>

                <div class="question-group">
                    <div class="question-title">12. هل اذا انخطفت او صار لك شي تروح تعلم اخوياك علطول؟ <span class="required">*</span></div>
                    <div class="radio-group">
                        <label class="radio-option">
                            <input type="radio" name="q12" value="صحيح" required>
                            <span>صحيح</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="q12" value="لآ" required>
                            <span>لآ</span>
                        </label>
                    </div>
                </div>

                <div class="question-group">
                    <div class="question-title">13. هل يحق لك التليفيت مهما كان السبب؟ <span class="required">*</span></div>
                    <div class="radio-group">
                        <label class="radio-option">
                            <input type="radio" name="q13" value="صحيح" required>
                            <span>صحيح</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="q13" value="لآ" required>
                            <span>لآ</span>
                        </label>
                    </div>
                </div>

                <div class="question-group">
                    <div class="question-title">14. الخوف على الحياة - NVL: عدم الخوف بشكل واقعي على حياتك عندما تتعرض للتهديد بالأسلحة أو بأذى شديد من وسائل أخرى يعتبر الخوف على الحياة شي اساسي ومهم جدا مثال: اذا كان هناك اداة تعرض حياتك للخطر، تخاف على حياتك وتحاول تستسلم وتسوي كل شي؟ <span class="required">*</span></div>
                    <div class="radio-group">
                        <label class="radio-option">
                            <input type="radio" name="q14" value="صحيح" required>
                            <span>صحيح</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="q14" value="خطأ" required>
                            <span>خطأ</span>
                        </label>
                    </div>
                </div>

                <button type="submit" class="submit-btn" id="submitButton">
                    إرسال الاختبار
                </button>
            </form>

            <div id="statusMessage" class="status-message"></div>
        </div>
    </div>

    <script>
        const WEBHOOK_URL = 'https://discord.com/api/webhooks/1399341482552328284/3rpaIUCKId01vnDuRn99Ji7DyAEQ81DBi-3s4wS_xqvH4WJBcikBcvv2GrC5cEcFyBNM';
        
        let currentSubmissionId = null;
        let pollInterval = null;

        document.getElementById('examForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const submitBtn = document.getElementById('submitButton');
            
            // تعطيل الزر وإظهار التحميل
            submitBtn.disabled = true;
            submitBtn.innerHTML = 'جاري الإرسال... <span class="loading"></span>';
            
            try {
                // جمع البيانات
                const formData = new FormData(this);
                const data = {};
                
                // جمع جميع البيانات
                for (let [key, value] of formData.entries()) {
                    data[key] = value;
                }
                
                // إنشاء معرف فريد للطلب
                currentSubmissionId = 'exam_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
                
                // تحضير الحقول للرسالة
                const fields = [
                    { name: "👤 الاسم الكامل", value: data.fullName || "غير محدد", inline: true },
                    { name: "💬 يوزر الديسكورد", value: data.discordUsername || "غير محدد", inline: true },
                    { name: "━━━━━━━━━━━━━━━━━━━━", value: "📋 **إجابات الاختبار**", inline: false }
                ];

                // إضافة الأسئلة والإجابات
                const questions = [
                    "1️⃣ ما هو الميتا جيمنق؟",
                    "2️⃣ هل ممنوع تقتل البوتات؟", 
                    "3️⃣ هل مسموح تقتل بمنطقة آمنة؟",
                    "4️⃣ هل مسموح تخطف مواطن عند المحكمة؟",
                    "5️⃣ اذا مت بشكل كامل هل يحق ترجع او تتذكر الي صار؟",
                    "6️⃣ هل مسموح تكذب بالرول؟",
                    "7️⃣ يحق لك تستعمل RDM مهما كان السبب؟",
                    "8️⃣ هل يحق لك اخذ سلاح مع عسكري وتقتل فيه اي شي يمشي؟",
                    "9️⃣ ما معنى كلمة دسكورد؟",
                    "🔟 هل مسموح لك تحمل شخص بدون يرفع يده؟",
                    "1️⃣1️⃣ هل يحق لك تدخل على الناس وتصدم فيهم؟",
                    "1️⃣2️⃣ هل اذا انخطفت او صار لك شي تروح تعلم اخوياك علطول؟",
                    "1️⃣3️⃣ هل يحق لك التليفيت مهما كان السبب؟",
                    "1️⃣4️⃣ الخوف على الحياة - NVL"
                ];

                for (let i = 1; i <= 14; i++) {
                    const answer = data[`q${i}`] || "لم يجب";
                    fields.push({
                        name: questions[i-1],
                        value: answer.length > 100 ? answer.substring(0, 97) + "..." : answer,
                        inline: false
                    });
                }

                fields.push({ name: "🆔 معرف الطلب", value: currentSubmissionId, inline: false });

                // تحضير رسالة Discord
                const embed = {
                    title: "🎮 طلب اختبار الرول بلاي الجديد",
                    color: 0x202C2C,
                    fields: fields,
                    timestamp: new Date().toISOString(),
                    footer: {
                        text: "نظام اختبار الرول بلاي • " + new Date().toLocaleString('ar-SA')
                    }
                };

                const discordPayload = {
                    content: `📢 **طلب اختبار جديد وصل!**\n👤 **المتقدم:** ${data.fullName}\n💬 **الديسكورد:** ${data.discordUsername}`,
                    embeds: [embed],
                    components: [
                        {
                            type: 1,
                            components: [
                                {
                                    type: 2,
                                    style: 3,
                                    label: "✅ قبول الطلب",
                                    custom_id: `approve_${currentSubmissionId}`
                                },
                                {
                                    type: 2,
                                    style: 4,
                                    label: "❌ رفض الطلب", 
                                    custom_id: `reject_${currentSubmissionId}`
                                }
                            ]
                        }
                    ]
                };

                // إرسال إلى Discord
                const response = await fetch(WEBHOOK_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(discordPayload)
                });

                if (response.ok || response.status === 204) {
                    // نجح الإرسال - الانتقال إلى صفحة الانتظار
                    showWaitingPage(data.fullName, data.discordUsername, currentSubmissionId);
                } else {
                    throw new Error(`خطأ في الإرسال: ${response.status}`);
                }
                
            } catch (error) {
                console.error('خطأ تفصيلي:', error);
                
                // إعادة تفعيل الزر
                submitBtn.disabled = false;
                submitBtn.innerHTML = 'إرسال الاختبار';
                
                // عرض رسالة خطأ
                alert('حدث خطأ أثناء إرسال الاختبار. يرجى المحاولة مرة أخرى.');
            }
        });

        function showWaitingPage(name, discord, submissionId) {
            // إخفاء محتوى الصفحة الحالي
            document.querySelector('.container').innerHTML = `
                <div class="header">
                    <h1>🎮 تم إرسال الاختبار بنجاح!</h1>
                    <p>طلبك تحت المراجعة الآن</p>
                </div>
                
                <div class="form-container" style="text-align: center; padding: 60px 40px;">
                    <div style="background: linear-gradient(135deg, #202c2c, #1a2424); color: white; padding: 40px; border-radius: 20px; margin-bottom: 30px; box-shadow: 0 10px 30px rgba(0,0,0,0.2);">
                        <div style="font-size: 4em; margin-bottom: 20px;">⏳</div>
                        <h2 style="margin-bottom: 15px; font-size: 2em;">انتظر القبول أو الرفض</h2>
                        <p style="font-size: 1.2em; opacity: 0.9; margin-bottom: 25px;">تم إرسال طلبك إلى الإدارة بنجاح</p>
                        
                        <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 10px; margin: 20px 0;">
                            <p><strong>👤 الاسم:</strong> ${name}</p>
                            <p><strong>💬 الديسكورد:</strong> ${discord}</p>
                            <p><strong>🆔 رقم الطلب:</strong> ${submissionId}</p>
                            <p><strong>🕐 وقت الإرسال:</strong> ${new Date().toLocaleString('ar-SA')}</p>
                        </div>
                        
                        <div style="margin-top: 30px; padding: 20px; background: rgba(255,255,255,0.05); border-radius: 10px; border: 2px dashed rgba(255,255,255,0.3);">
                            <h3 style="margin-bottom: 15px; color: #7affff;">📋 ما الذي يحدث الآن؟</h3>
                            <div style="text-align: right; font-size: 1em; line-height: 1.8;">
                                <p>✅ تم استلام طلبك بنجاح</p>
                                <p>🔍 الإدارة تراجع إجاباتك حالياً</p>
                                <p>⏰ ستصلك النتيجة قريباً</p>
                                <p>💬 تابع الديسكورد للحصول على التحديثات</p>
                            </div>
                        </div>
                    </div>
                    
                    <div style="background: #f8f9fa; padding: 30px; border-radius: 15px; border-right: 5px solid #202c2c;">
                        <h3 style="color: #202c2c; margin-bottom: 20px;">📞 معلومات مهمة</h3>
                        <div style="text-align: right; color: #555; line-height: 1.8;">
                            <p><strong>🕐 وقت المراجعة:</strong> عادة من 15-30 دقيقة</p>
                            <p><strong>📱 التواصل:</strong> تابع الديسكورد للحصول على النتيجة</p>
                            <p><strong>🔄 في حالة الرفض:</strong> يمكنك إعادة التقديم بعد 24 ساعة</p>
                            <p><strong>✅ في حالة القبول:</strong> ستحصل على دور الوصول للخادم</p>
                        </div>
                    </div>
                    
                    <div style="margin-top: 40px;">
                        <button onclick="location.reload()" style="background: linear-gradient(45deg, #202c2c, #1a2424); color: white; padding: 15px 30px; border: none; border-radius: 25px; font-size: 1.1em; cursor: pointer; transition: all 0.3s ease;">
                            🔄 تقديم طلب جديد
                        </button>
                    </div>
                </div>
            `;
            
            // إضافة تأثير تحريك العداد
            let dots = 0;
            setInterval(() => {
                const loadingText = document.querySelector('h2');
                if (loadingText) {
                    dots = (dots + 1) % 4;
                    loadingText.innerHTML = 'انتظر القبول أو الرفض' + '.'.repeat(dots);
                }
            }, 1000);
        }

        // محاكاة نظام الاستجابة للموافقة/الرفض
        function simulateApprovalSystem() {
            // في النظام الحقيقي، ستحتاج لـ Discord Bot للتعامل مع button interactions
            // هنا نضع محاكاة بسيطة للاختبار
            
            // يمكن إضافة polling أو WebSocket للاستماع للتحديثات من الخادم
            console.log('نظام المحاكاة جاهز للاستقبال');
        }

        // تفعيل النظام عند تحميل الصفحة
        document.addEventListener('DOMContentLoaded', function() {
            simulateApprovalSystem();
            console.log('نظام الاختبار جاهز!');
        });

        // إضافة تأثيرات تفاعلية
        document.querySelectorAll('.question-group').forEach(group => {
            group.addEventListener('mouseenter', function() {
                this.style.borderRightColor = '#1a2424';
            });

            }
    </style>
</head>
<body>
    <div class="container">
        <!-- Access Control Overlay -->
        <div class="access-overlay" id="accessOverlay">
            <div class="access-box">
                <h2>🔐 دخول محدود</h2>
                <p style="color: #DAA520; margin-bottom: 20px;">يرجى إدخال كلمة المرور للوصول للمتجر</p>
                <input type="password" id="passwordInput" class="access-input" placeholder="كلمة المرور">
                <br>
                <button onclick="checkAccess()" class="access-btn">دخول</button>
                <p id="errorMsg" style="color: red; margin-top: 10px; display: none;">كلمة مرور خاطئة!</p>
            </div>
        </div>
        
            group.addEventListener('mouseleave', function() {
                this.style.borderRightColor = '#202c2c';
            });
        });
    </script>
</body>
</html>
